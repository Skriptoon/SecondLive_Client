<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/bootstrap.css">
    <script src="./js/jquery-3.5.1.min.js"></script>
    <script src="./js/jquery-ui.min.js"></script>
    <title>Inventory</title>
    <style>
        /*.inventory {

        }*/
        .cell {
           padding: 0;
        }
        .cell-body {
            height: 30px;
            width: 30px;
            background-color: darkgray;
        }
        .obj {
            height: 60px;
            width: 60px;
            background-color: rgba(39, 39, 39, 0.658);
        }
    </style>
</head>
<body>
    <!--<div class="container-fluid">
        <div class="row">
            <div class="col-4">
                <div class="inventory">
                    <div class="head">
                        <h4>Инвентарь</h4>
                    </div>
                    <div class="row">
                        <div class="col-2 pr-0 pl-1"><div class="cell"></div></div>
                        <div class="col-2 pr-0 pl-1"><div class="cell"></div></div>
                        <div class="col-2 pr-0 pl-1"><div class="cell"></div></div>
                        <div class="col-2 pr-0 pl-1"><div class="cell"></div></div>
                        <div class="col-2 pr-0 pl-1"><div class="cell"></div></div>
                        <div class="col-2 pr-0 pl-1"><div class="cell"></div></div>
                    </div>
                </div>
            </div>
        </div>
    </div>-->
    <div class="inventory">
        <div class="head">
            <h4>Инвентарь</h4>
        </div>
        <div class="cells">
            <table class="table-bordered">
                <tr>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                </tr>
                <tr>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                </tr>
                <tr>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                </tr>
                <tr>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                    <td class="cell"><div class="cell-body"></div></td>
                </tr>
            </table>
        </div>
        <div class="obj">
            as
        </div>
        <script>
            var cell;
            $( ".obj" ).draggable();
$( ".cell-body" ).droppable({
  drop: function( event, ui ) {
var drag_coords = $(ui.draggable).offset();
var drop_coords = $(this).offset();

if(cell) return;

setTimeout(() => {
cell = false;
}, 10)

if((drop_coords.top < drag_coords.top && drag_coords.top < (drop_coords.top + 30))
&& (drop_coords.left < drag_coords.left && drag_coords.left < (drop_coords.left + 30))) {
if((drop_coords.top + 30 - drag_coords.top) * (drop_coords.left + 30 - drag_coords.left) / (30*30) > 0.35) {
$(ui.draggable).offset($(this).offset());
console.log($(this).offset());
$(this).css("background", "red")
cell = true;
return;
}
}

if((drop_coords.top < drag_coords.top && drag_coords.top < (drop_coords.top + 30))
&& (drop_coords.left > drag_coords.left)) {
if((drop_coords.top + 30 - drag_coords.top) * 30 / (30*30) > 0.5) {
$(ui.draggable).offset($(this).offset());
$(this).css("background", "red")
cell = true;
return;
}
}

if((drop_coords.top > drag_coords.top)
&& (drop_coords.left < drag_coords.left && drag_coords.left < (drop_coords.left + 30))) {
if((drag_coords.top + $(ui.draggable).height() - drop_coords.top) * (drop_coords.left + 30 - drag_coords.left) / (30*30) > 0.5) {
$(ui.draggable).offset($(this).offset());
$(this).css("background", "red")
cell = true;
return;
}
}

if((drop_coords.top > drag_coords.top)
&& (drop_coords.left > drag_coords.left)) {
if((drag_coords.top + $(ui.draggable).height() - drop_coords.top) * 30 / (30*30) > 0.35) {
$(ui.draggable).offset($(this).offset());
$(this).css("background", "red")
cell = true;
return;
}
}
},

tolerance: "touch"
});
        </script>
</body>
</html>
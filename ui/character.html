<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css\bootstrap.css">
    <link rel="stylesheet" href="css/ion.rangeSlider.css">
    
    <script src="js\jquery-3.5.1.min.js"></script>
    <script src="https://kit.fontawesome.com/990d84e24c.js" crossorigin="anonymous"></script>
</head>
<body>
    <div class="container m-0 py-5" style="width:48vh">
        <div class="row no-gutters">
            <div class="col-auto">
                <div class="nav flex-column nav-pills" id="v-pills-tab" role="tablist" aria-orientation="vertical">
                    <a class="nav-link active" id="v-pills-home-tab" data-toggle="pill" href="#v-pills-home" role="tab" aria-controls="v-pills-home" aria-selected="true"><i class="fas fa-venus-mars"></i></a>
                    <a class="nav-link" id="v-pills-profile-tab" data-toggle="pill" href="#v-pills-profile" role="tab" aria-controls="v-pills-profile" aria-selected="false"><i class="far fa-meh-blank"></i></a>
                    <a class="nav-link" id="v-pills-messages-tab" data-toggle="pill" href="#v-pills-messages" role="tab" aria-controls="v-pills-messages" aria-selected="false"><i class="fas fa-child"></i></a>
                    <a class="nav-link" id="v-pills-settings-tab" data-toggle="pill" href="#v-pills-settings" role="tab" aria-controls="v-pills-settings" aria-selected="false"><i class="fas fa-tshirt"></i></a>
                </div>
            </div>
            <div class="col pl-2">
                <div class="tab-content" id="v-pills-tabContent">
                    <div class="tab-pane fade show active" id="v-pills-home" role="tabpanel" aria-labelledby="v-pills-home-tab">
                        <h6>Пол</h6>
                        <div class="btn-group" role="group" aria-label="Basic example">
                            <button type="button" onclick="SwGen(0);" class="btn btn-secondary">Мужчина</button>
                            <button type="button" onclick="SwGen(1);" class="btn btn-secondary">Женщина</button>
                        </div>
                        <input class="form-control" name="firstname" placeholder="Имя">
                        <input class="form-control" name="lastname" placeholder="Фамилия">
                        <h6>Отец</h6>
                        <div class="row slider" id="father" data-index="0">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Benjamin</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Мать</h6>
                        <div class="row slider" id="mother" data-index="0">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Hannah</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        
                        <label for="similarity"><h6>Сходство</h6></label>
                        <input type="range" num="1" id="similarity" min="0" max="100" step="1" category="0">
                        
                        <label for="skin"><h6>Цвет кожи</h6></label>
                        <input type="range" num="2" id="skin" min="0" max="100" step="1" category="0">
                    </div>
                    <div class="tab-pane fade overflow-auto" id="v-pills-profile" role="tabpanel" aria-labelledby="v-pills-profile-tab">
                        <div class="overflow-auto px-3" style="height:80vh">
                            <label for="noseWidth"><h6>Ширина носа</h6></label>
                            <input type="range" num="3" id="noseWidth" min="-1" max="1" step="0.01" category="1">
                            <label for="noseHeight"><h6>Высота носа</h6></label>
                            <input type="range" num="4" id="noseHeight" min="-1" max="1" step="0.01" category="1">
                            <label for="noseTipLength"><h6>Длина кончика носа</h6></label>
                            <input type="range" num="5" id="noseTipLength" min="-1" max="1" step="0.01" category="1">
                            <label for="noseDepth"><h6>Глубина моста носа</h6></label>
                            <input type="range" num="6" id="noseDepth" min="-1" max="1" step="0.01" category="1">
                            <label for="noseTipHeight"><h6>Высота кончика носа</h6></label>
                            <input type="range" num="7" id="noseTipHeight" min="-1" max="1" step="0.01" category="1">
                            <label for="noseCurvature"><h6>Поломаность носа</h6></label>
                            <input type="range" num="8" id="noseCurvature" min="-1" max="1" step="0.01" category="1">
                            <label for="eyebrowHeight"><h6>Высота бровей</h6></label>
                            <input type="range" num="9" id="eyebrowHeight" min="-1" max="1" step="0.01" category="2">
                            <label for="eyebrowDepth"><h6>Глубина бровей</h6></label>
                            <input type="range" num="10" id="eyebrowDepth" min="-1" max="1" step="0.01" category="2">
                            <label for="cheekboneHeight"><h6>Высота скул</h6></label>
                            <input type="range" num="11" id="cheekboneHeight" min="-1" max="1" step="0.01" category="3">
                            <label for="cheekboneWidth"><h6>Ширина скул</h6></label>
                            <input type="range" num="12" id="cheekboneWidth" min="-1" max="1" step="0.01" category="3">
                            <label for="cheekDepth"><h6>Глубина щеки</h6></label>
                            <input type="range" num="13" id="cheekDepth" min="-1" max="1" step="0.01" category="3">
                            <label for="eyeScale"><h6>Размер глаз</h6></label>
                            <input type="range" num="14" id="eyeScale" min="-1" max="1" step="0.01" category="2">
                            <label for="lipThickness"><h6>Толщина губ</h6></label>
                            <input type="range" num="15" id="lipThickness" min="-1" max="1" step="0.01" category="3">
                            <label for="jawWidth"><h6>Ширина челюсти</h6></label>
                            <input type="range" num="16" id="jawWidth" min="-1" max="1" step="0.01" category="3">
                            <label for="jawShape"><h6>Форма челюсти</h6></label>
                            <input type="range" num="17" id="jawShape" min="-1" max="1" step="0.01" category="3">
                            <label for="chinHeight"><h6>Высота подбородка</h6></label>
                            <input type="range" num="18" id="chinHeight" min="-1" max="1" step="0.01" category="4">
                            <label for="chinDepth"><h6>Глубина подбородка</h6></label>
                            <input type="range" num="19" id="chinDepth" min="-1" max="1" step="0.01" category="4">
                            <label for="chinWidth"><h6>Ширина подбородка</h6></label>
                            <input type="range" num="20" id="chinWidth" min="-1" max="1" step="0.01" category="4">
                            <label for="chinIndent"><h6>Подбородочный отступ</h6></label>
                            <input type="range" num="21" id="chinIndent" min="-1" max="1" step="0.01" category="4">
                            <label for="neck"><h6>Обхват шеи</h6></label>
                            <input type="range" num="22" id="neck" min="-1" max="1" step="0.01" category="3">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="v-pills-messages" role="tabpanel" aria-labelledby="v-pills-messages-tab">
                        <h6>Волосы</h6>
                        <div class="row slider" id="hair" data-index="5" data-gender>
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Close Shave</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Брови</h6>
                        <div class="row slider" id="eyebrows" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6 class="hide">Борода</h6>
                        <div class="row slider" id="beard" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Цвет волос</h6>
                        <div class="row slider" id="hairColor" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Green</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Цвет глаз</h6>
                        <div class="row slider" id="eyeColor" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Зеленый</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Пятна</h6>
                        <div class="row slider" id="blemishes" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Старение</h6>
                        <div class="row slider" id="ageing" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Макияж</h6>
                        <div class="row slider" id="makeup" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Румянец</h6>
                        <div class="row slider" id="blush" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Цвет лица</h6>
                        <div class="row slider" id="complexion" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Солнечные ожоги</h6>
                        <div class="row slider" id="sundamage" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Помада</h6>
                        <div class="row slider" id="lipstick" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Волосы на теле</h6>
                        <div class="row slider" id="chesthair" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Пятна на теле</h6>
                        <div class="row slider" id="bodyblemishes" data-index="5">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">Нет</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                    </div>
                    <div class="tab-pane fade" id="v-pills-settings" role="tabpanel" aria-labelledby="v-pills-settings-tab">
                        <h6>Верхняя одежда</h6>
                        <div class="row slider">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">ююю</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Нижняя одежда</h6>
                        <div class="row slider">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">ююю</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                        <h6>Обувь</h6>
                        <div class="row slider">
                            <div class="col-auto left"><i class="fas fa-angle-left"></i></div>
                            <div class="col data text-center">ююю</div>
                            <div class="col-auto right"><i class="fas fa-angle-right"></i></div>
                            <input type="hidden" value="0">
                        </div>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="random_char()">Рандом</button>
                <button class="btn btn-success" onclick="SaveChar()">Сохранить</button>
            </div>
        </div>
    </div>
    <script src="js/bootstrap.min.js"></script>
    <script src="js/ion.rangeSlider.min.js"></script>
    <script>
        for(var i = 1; i < 23; i++) {
            var elem = $("input[num='" + i +"']");
            var min = elem.prop("min");
            var max = elem.prop("max");
            var step = elem.prop("step");
            elem.ionRangeSlider({
                min: min,
                max: max,
                step: step,
                skin: "square",
                hide_min_max: true
            })
        }
        
        $("input[type='range']").on("change", function() {
            mp.trigger('characterCreator.client.action', JSON.stringify(new CharData($(this).attr("category"),
            $(this).prop("id"), $(this).data("from"))));
        })
        class CharData {
            constructor(category, name, value) {
                this.action = "changeFieldValue";
                this.categoryIndex = +category;
                this.fieldName = name;
                this.fieldValue = value;
            }
        }

        var data = {
            "father":["Benjamin", "Daniel", "Joshua", "Noah", "Andrew", "Juan", "Alex", "Isaac", "Evan", "Ethan", "Vincent", "Angel", "Diego", "Adrian", "Gabriel", "Michael", "Santiago", "Kevin", "Louis", "Samuel", "Anthony", "Claude", "Niko", "John"],
            "fatherVal":[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 42, 43, 44],
            "mother":["Hannah", "Aubrey", "Jasmine", "Gisele", "Amelia", "Isabella", "Zoe", "Ava", "Camila", "Violet", "Sophia", "Evelyn", "Nicole", "Ashley", "Gracie", "Brianna", "Natalie", "Olivia", "Elizabeth", "Charlotte", "Emma", "Misty"],
            "motherVal":[21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 45],
            "eyebrows":["None", "Balanced", "Fashion", "Cleopatra", "Quizzical", "Femme", "Seductive", "Pinched", "Chola", "Triomphe", "Carefree", "Curvaceous", "Rodent", "Double Tram", "Thin", "Penciled", "Mother Plucker", "Straight and Narrow", "Natural", "Fuzzy", "Unkempt", "Caterpillar", "Regular", "Mediterranean", "Groomed", "Bushels", "Feathered", "Prickly", "Monobrow", "Winged", "Triple Tram", "Arched Tram", "Cutouts", "Fade Away", "Solo Tram"],
            "eyebrowsVal":[255, 0, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28, 29, 30, 31, 32, 33],
            "beard":["None", "Light Stubble", "Balbo", "Circle Beard", "Goatee", "Chin", "Chin Fuzz", "Pencil Chin Strap", "Scruffy", "Musketeer", "Mustache", "Trimmed Beard", "Stubble", "Thin Circle Beard", "Horseshoe", "Pencil and 'Chops", "Chin Strap Beard", "Balbo and Sideburns", "Mutton Chops", "Scruffy Beard", "Curly", "Curly & Deep Stranger", "Handlebar", "Faustic", "Otto & Patch", "Otto & Full Stranger", "Light Franz", "The Hampstead", "The Ambrose", "Lincoln Curtain"],
            "beardVal":[255, 0, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 26, 27, 28],
            "hairM": ["Нет", "Close Shave", "Buzzcut", "Faux Hawk", "Hipster", "Side Parting", "Shorter Cut", "Biker", "Ponytail", "Cornrows", "Slicked", "Short Brushed"],
            "hairMVal":[ 0, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12],
            "hairF": ["Нет", "Close Shave", "Short", "Layered Bob", "Pigtails", "Ponytail", "Braided Mohawk", "Braids", "Bob", "Faux Hawk", "French Twist", "Long Bob"],
            "hairFVal":[ 0, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12],
            "hairColor":["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "13", "14", "15", "16", "17", "18", "19", "20"],
            "hairColorVal":[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
            "eyeColor":["Green", "Emerald", "Light Blue", "Ocean Blue", "Light Brown", "Dark Brown", "Hazel", "Dark Gray", "Light Gray", "Pink", "Yellow", "Purple"],
            "eyeColorVal":[0, 1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20],
            "blemishes":[255, 1, 2, 4,  3,5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24],
            "ageing":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15],
            "makeup":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24],
            "blush":[255, 1, 2, 4, 3, 5, 6, 7],
            "complexion":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12],
            "sundamage":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11],
            "lipstick":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10],
            "freckles":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18],
            "chesthair":[255, 1, 2, 4, 3, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17],
            "bodyblemishes":[255, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12]
        };

        function SaveChar() {
            var firstname = $("input[name='firstname']").val();
            var lastname = $("input[name='lastname']").val();
            if(!firstname || !lastname) {
                return;
            }
            mp.trigger('characterCreator.client.submit', firstname, lastname)
        }

        function random_char() {
            var rnd_data = {
                "change1":["father", "mother", "eyebrows", "beard", "hairColor", "eyeColor"],
                "change2":["blemishes", "ageing", "complexion", "sundamage", "freckles", "chesthair", "bodyblemishes"]
            }
            for(var i = 0; i < rnd_data["change1"].length; i++) {
                var rnd = getRandomInt(0, data[rnd_data["change1"][i] + "Val"].length);
                $("#" + rnd_data["change1"][i] + " input").val(data[rnd_data["change1"][i] + "Val"][rnd]);
                $("#" + rnd_data["change1"][i] + " .data").text(data[rnd_data["change1"][i]][rnd]);
                console.log(JSON.stringify(new CharData($("#" + rnd_data["change1"][i]).attr("data-index"), $("#" + rnd_data["change1"][i]).attr("id"),
                data[rnd_data["change1"][i] + "Val"] === undefined ? data[rnd_data["change1"][i]][0] == 255 ? !rnd ? 
                255 : data[rnd_data["change1"][i]][rnd] - 1 : data[rnd_data["change1"][i]][rnd] : data[rnd_data["change1"][i] + "Val"][rnd])));
                mp.trigger('characterCreator.client.action', JSON.stringify(new CharData($("#" + rnd_data["change1"][i]).attr("data-index"), $("#" + rnd_data["change1"][i]).attr("id"),
                data[rnd_data["change1"][i] + "Val"] === undefined ? data[rnd_data["change1"][i]][0] == 255 ? !rnd ? 
                255 : data[rnd_data["change1"][i]][rnd] - 1 : data[rnd_data["change1"][i]][rnd] : data[rnd_data["change1"][i] + "Val"][rnd])));
            }

            for(var i = 0; i < rnd_data["change2"].length; i++) {
                var rnd = getRandomInt(0, data[rnd_data["change2"][i]].length);
                $("#" + rnd_data["change2"][i] + " input").val(rnd);
                $("#" + rnd_data["change2"][i] + " .data").text(data[rnd_data["change2"][i]][rnd] == 255 ? "Нет" : "Вариант:" + data[rnd_data["change2"][i]][rnd]);
                console.log(JSON.stringify(new CharData($("#" + rnd_data["change2"][i]).attr("data-index"), $("#" + rnd_data["change2"][i]).attr("id"),
                data[rnd_data["change2"][i] + "Val"] === undefined ? data[rnd_data["change2"][i]][0] == 255 ? !rnd ? 
                255 : data[rnd_data["change2"][i]][rnd] - 1 : data[rnd_data["change2"][i]][rnd] : data[rnd_data["change2"][i] + "Val"][rnd])));
                mp.trigger('characterCreator.client.action', JSON.stringify(new CharData($("#" + rnd_data["change2"][i]).attr("data-index"), $("#" + rnd_data["change2"][i]).attr("id"),
                data[rnd_data["change2"][i] + "Val"] === undefined ? data[rnd_data["change2"][i]][0] == 255 ? !rnd ? 
                255 : data[rnd_data["change2"][i]][rnd] - 1 : data[rnd_data["change2"][i]][rnd] : data[rnd_data["change2"][i] + "Val"][rnd])));
            }
            console.log("hair" + (gender ? "M" : "F") + "Val");
            var rnd = getRandomInt(0, data["hair" + (gender ? "M" : "F") + "Val"].length);
            $("#hair input").val(data["hair" + (gender ? "M" : "F") + "Val"][rnd]);
            $("#hair .data").text(data["hair" + (gender ? "M" : "F")][rnd]);
            mp.trigger('characterCreator.client.action', JSON.stringify(new CharData($("#hair").attr("data-index"), $("#hair").attr("id"),
            data["hair" + (gender ? "M" : "F") + "Val"][rnd])));

            for(var i = 1; i < 23; i++) {
                var elem = $("input[num='" + i +"']");
                var min = elem.prop("min") < 0 ? 0 : elem.prop("min");
                var max = elem.prop("max");
                var rnd = Math.random() * (max - min) + min;
                if(elem.prop("min") < 0)
                    rnd = rnd * (Math.random() - .5) * 2;
                var my_range = elem.data("ionRangeSlider");
                my_range.update({
                    from: rnd
                });
            }
        }

        function getRandomInt(min, max) {
            min = Math.ceil(min);
            max = Math.floor(max);
            return Math.floor(Math.random() * (max - min)) + min; //Максимум не включается, минимум включается
        }

        var gender = 0;
        function SwGen(toggle) {
            gender = toggle;
            if(gender) {
                $("#beard, .hide").css("display", "none");
            } else {
                $("#beard, .hide").css("display", "flex");
            }
            mp.trigger('characterCreator.client.action', JSON.stringify(new CharData(0, "gender", toggle)));
        }

        $(".slider .right").click(function() {
            var parant = $(this).parent();
            var dt = parant.attr("data-gender") === undefined ? parant.attr("id") : gender ? 
            parant.attr("id") + "F" : parant.attr("id") + "M";
            var val = +parant.children("input").val() + 1 < data[dt].length ?
            +parant.children("input").val() + 1 : 0;
            var txt = Number.isInteger(data[dt][val]) ? data[dt][val] == 255 ?
            "Нет" : "Вариант: " + data[dt][val] : data[dt][val];
            parant.children(".data").text(txt);
            parant.children("input").val(val);
            mp.trigger('characterCreator.client.action', JSON.stringify(new CharData(parant.attr("data-index"), parant.attr("id"),
            data[dt + "Val"] === undefined ? data[dt][0] == 255 ? !val ? 255 : data[dt][val] - 1 : data[dt][val] : data[dt + "Val"][val])));
        })
        $(".slider .left").click(function() {
            var parant = $(this).parent();
            var dt = parant.attr("data-gender") === undefined ? parant.attr("id") : gender ? 
            parant.attr("id") + "F" : parant.attr("id") + "M";
            var val = +parant.children("input").val() - 1 >= 0 ?
            +parant.children("input").val() - 1 : data[dt].length - 1;
            var txt = Number.isInteger(data[dt][val]) ? data[dt][val] == 255 ?
            "Нет" : "Вариант: " + data[dt][val] : data[dt][val];
            parant.children(".data").text(txt);
            parant.children("input").val(val);
            mp.trigger('characterCreator.client.action', JSON.stringify(new CharData(parant.attr("data-index"), parant.attr("id"),
            data[dt + "Val"] === undefined ? data[dt][0] == 255 ? !val ? 255 : data[dt][val] - 1 : data[dt][val] : data[dt + "Val"][val])));
        })
    </script>
</body>
</html>